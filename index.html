
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>KeyChain Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#keychain-documentation" class="toc-h1 toc-link" data-title="KeyChain Documentation">KeyChain Documentation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#installation" class="toc-h2 toc-link" data-title="Installation">Installation</a>
                  </li>
                  <li>
                    <a href="#getting-started" class="toc-h2 toc-link" data-title="Getting started">Getting started</a>
                  </li>
                  <li>
                    <a href="#contact" class="toc-h2 toc-link" data-title="Contact">Contact</a>
                  </li>
                  <li>
                    <a href="#license" class="toc-h2 toc-link" data-title="License">License</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#protocol" class="toc-h1 toc-link" data-title="Protocol">Protocol</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#generate-a-key-pair" class="toc-h2 toc-link" data-title="Generate a key pair">Generate a key pair</a>
                  </li>
                  <li>
                    <a href="#sign-transaction-in-hex-format" class="toc-h2 toc-link" data-title="Sign transaction in hex format">Sign transaction in hex format</a>
                  </li>
                  <li>
                    <a href="#sign-hash-of-transaction" class="toc-h2 toc-link" data-title="Sign hash of transaction">Sign hash of transaction</a>
                  </li>
                  <li>
                    <a href="#list-all-key-names" class="toc-h2 toc-link" data-title="List all key names">List all key names</a>
                  </li>
                  <li>
                    <a href="#calculate-the-public-key" class="toc-h2 toc-link" data-title="Calculate the public key">Calculate the public key</a>
                  </li>
                  <li>
                    <a href="#lock-all-unlocked-keys" class="toc-h2 toc-link" data-title="Lock all unlocked keys">Lock all unlocked keys</a>
                  </li>
                  <li>
                    <a href="#unlock-private-key" class="toc-h2 toc-link" data-title="Unlock private key">Unlock private key</a>
                  </li>
                  <li>
                    <a href="#keychain-version-details" class="toc-h2 toc-link" data-title="KeyChain version details">KeyChain version details</a>
                  </li>
                  <li>
                    <a href="#keychain-version-number" class="toc-h2 toc-link" data-title="KeyChain version number">KeyChain version number</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#installation-guides" class="toc-h1 toc-link" data-title="Installation guides">Installation guides</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#macos" class="toc-h2 toc-link" data-title="macOS">macOS</a>
                  </li>
                  <li>
                    <a href="#windows" class="toc-h2 toc-link" data-title="Windows">Windows</a>
                  </li>
                  <li>
                    <a href="#linux" class="toc-h2 toc-link" data-title="Linux">Linux</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sign-an-ethereum-transaction" class="toc-h1 toc-link" data-title="Sign an Ethereum transaction">Sign an Ethereum transaction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#step-by-step-guide" class="toc-h2 toc-link" data-title="Step-by-step guide">Step-by-step guide</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#websocket-api" class="toc-h1 toc-link" data-title="WebSocket API">WebSocket API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#demo-pages-in-javascript" class="toc-h2 toc-link" data-title="Demo pages in JavaScript">Demo pages in JavaScript</a>
                  </li>
                  <li>
                    <a href="#message-format" class="toc-h2 toc-link" data-title="Message format">Message format</a>
                  </li>
                  <li>
                    <a href="#websocket-integration-guide" class="toc-h2 toc-link" data-title="WebSocket integration guide">WebSocket integration guide</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#pipe-api" class="toc-h1 toc-link" data-title="Pipe API">Pipe API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#message-format-2" class="toc-h2 toc-link" data-title="Message format">Message format</a>
                  </li>
                  <li>
                    <a href="#pipe-integration-guide" class="toc-h2 toc-link" data-title="Pipe integration guide">Pipe integration guide</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#keychain-security" class="toc-h1 toc-link" data-title="KeyChain security">KeyChain security</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#about-keychain-security" class="toc-h2 toc-link" data-title="About KeyChain security">About KeyChain security</a>
                  </li>
                  <li>
                    <a href="#how-keychain-ensures-safe-key-storage" class="toc-h2 toc-link" data-title="How KeyChain ensures safe key storage">How KeyChain ensures safe key storage</a>
                  </li>
                  <li>
                    <a href="#os-specific-keychain-security" class="toc-h2 toc-link" data-title="OS-specific KeyChain security">OS-specific KeyChain security</a>
                  </li>
                  <li>
                    <a href="#three-security-layers-of-keychain" class="toc-h2 toc-link" data-title="Three security layers of KeyChain">Three security layers of KeyChain</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#useful-links" class="toc-h1 toc-link" data-title="Useful links">Useful links</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#error-handling" class="toc-h2 toc-link" data-title="Error Handling">Error Handling</a>
                  </li>
                  <li>
                    <a href="#exception-codes" class="toc-h2 toc-link" data-title="Exception codes">Exception codes</a>
                  </li>
                  <li>
                    <a href="#error-example" class="toc-h2 toc-link" data-title="Error example">Error example</a>
                  </li>
                  <li>
                    <a href="#log-files" class="toc-h2 toc-link" data-title="Log files">Log files</a>
                  </li>
                  <li>
                    <a href="#developer-debug-information" class="toc-h2 toc-link" data-title="Developer Debug Information">Developer Debug Information</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='http://keychain.array.io'>KeyChain official website</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='keychain-documentation'>KeyChain Documentation</h1><h2 id='introduction'>Introduction</h2>
<p><strong>KeyChain</strong> is a standalone app for signing transactions and generating key pairs. It stores private keys in an isolated environment where no logger, debugger or spyware can intercept them because of the <a href="#three-security-layers-of-keychain">three-layer security</a> protecting each action of the system.
<strong>KeyChain</strong> supports transactions from and to various blockchains, including Ethereum and Ethereum classic, Litecoin, Bitcoin, Bitcoin Cash, and Bitshares. </p>
<h2 id='installation'>Installation</h2>
<p>Download and install KeyChain for <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.11/KeyChain.Installer.v0.11.zip">macOS</a> or <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.13/keychain.msi">Windows</a> and Linux installers are coming soon.</p>

<p><em>Try out KeyChain on the <a href="https://arrayio.github.io/array-io-keychain/demo/">demo page</a>.</em></p>

<p>After installation, connect to the demo-page: <a href="http://localhost:16384/">http://localhost:16384/</a> to check if the installation was successful and to test the KeyChain commands. In case everything went well, you will see the following page and you will be able to see responses to the commands in the &quot;Response&quot; box when you click on them.</p>

<p><button class="show btn btn-info btn-sm" data-image='21'>show</button></p>

<p><img id='21' alt="screenshot from 2018-12-10 15-57-27" src="https://user-images.githubusercontent.com/34011337/49734247-be211a80-fc94-11e8-8d85-c70b738ecae3.png"></p>

<p>If you are having trouble connecting to the page, <a href="#contact">contact us</a> and we will do our best to help you.</p>

<p>Below you can find comprehensive installation guides for <a href="#macos">macOS</a>, <a href="#windows">Windows</a>, <a href="#linux">Linux</a>.</p>
<h2 id='getting-started'>Getting started</h2>
<p>After you have installed <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.11/KeyChain.Installer.v0.11.zip">KeyChain</a>, you can start using it with web3. Just install the <code>web3override</code> library from this <a href="https://www.npmjs.com/package/web3override">source</a> and follow these simple steps (see the right panel in javascript).</p>

<p>NB: Do not forget to install the library and require it:</p>

<p>1) Install the library
<code>npm i --save web3override</code></p>

<p>2) Require it
<code>const Module = require(&#39;web3override&#39;);</code></p>

<p>Now you can turn to the right panel where you create a new key with KeyChain and use an overridden web3 function.</p>
<pre class="highlight json tab-json"><code><span class="err">//go</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">javascript</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// create new key with KeyChain</span>
<span class="kr">const</span> <span class="nx">keyInstance</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">Module</span><span class="p">.</span><span class="nx">Keychain</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">keyInstance</span><span class="p">.</span><span class="nx">createKey</span><span class="p">(</span><span class="s1">'test1'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
<span class="nx">await</span> <span class="nx">keyInstance</span><span class="p">.</span><span class="nx">term</span><span class="p">();</span>

<span class="nx">Module</span><span class="p">.</span><span class="nx">override</span><span class="p">(</span><span class="nx">web3</span><span class="p">);</span>
<span class="c1">// now we use web3 with KeyChain</span>
<span class="nx">await</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">accounts</span><span class="p">.</span><span class="nx">signTransaction</span><span class="p">(</span><span class="nx">transactionParams</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span> <span class="c1">// overriden web3 function usage</span>
</code></pre>
<ul>
<li><code>keychain.js</code> - Keychain class with ws connection initialization</li>
<li><code>index.js</code> - override <code>web3.eth.accounts.signTransaction</code> method </li>
<li><code>test.js</code> - example usage together (<code>keychain</code> + <code>web3</code>) </li>
</ul>

<aside class="notice">
You must replace <code>test1</code> with your personal keyname.
</aside>

<p><strong>Run tests</strong></p>

<p>If you wish to see KeyChain in action, install KeyChain, then install the library from this <a href="https://www.npmjs.com/package/web3override">source</a> and import key to the <code>key_data</code> folder.</p>

<p>1) Add key to your <code>key_data</code>:</p>

<ul>
<li>keyname: <code>test1@76de427d42c38be4</code></li>
<li>password: <code>qwe</code></li>
</ul>

<p>2) <code>npm run test</code></p>

<p><button class="show btn btn-info btn-sm" data-image='30'>show</button></p>

<p><img id='30' alt="alt image" src="https://raw.githubusercontent.com/cypherpunk99/web3override/master/screencast.gif"></p>
<h2 id='contact'>Contact</h2>
<p>If you have questions or enquiries about KeyChain, please do not hesitate to contact us:</p>

<ul>
<li><a href="https://t.me/arrayio">Telegram</a></li>
<li><a href="https://stackoverflow.com/users/10429540/array-io">Stackoverflow</a></li>
<li><a href="https://twitter.com/ProjectArray">Twitter</a></li>
<li>Or you can write us an email to <a href="mailto:support@array.io">support@array.io</a>. </li>
</ul>

<p>If you want to report a security issue, include the word &quot;security&quot; in the subject field.</p>

<p>We take security issues very seriously and we&#39;ll be looking forward to hearing from you. We hope you enjoy using KeyChain! </p>
<h2 id='license'>License</h2>
<p>MIT License</p>

<p>Copyright (c) 2018 KeyChain</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<h1 id='protocol'>Protocol</h1><h2 id='generate-a-key-pair'>Generate a key pair</h2><h3 id='command'>Command</h3>
<p>create</p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"params"</span><span class="p">:</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"keyname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my key"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"curve"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secp256k1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cipher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aes256"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters'>Query parameters</h3>
<table><thead>
<tr>
<th><strong>Parameter</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>encrypted</td>
<td><code>string</code></td>
<td>Requests encryption of the key.</td>
</tr>
<tr>
<td>curve</td>
<td><code>string</code></td>
<td>Keychain uses elliptic curve algorithm.</td>
</tr>
<tr>
<td>keyname</td>
<td><code>string</code></td>
<td>Create a name for your key. This will be a mnemonic label of the key - not the actual key.</td>
</tr>
<tr>
<td>cipher</td>
<td><code>string</code></td>
<td>Specifies encryption type (we use <code>aes</code>) and the size of the key in bits.</td>
</tr>
</tbody></table>
<h3 id='response-format'>Response format</h3>
<p>When you pass a short key name in the create command, you get an exended name which consists of the prefix and first 8 bytes of the hash. After that, you will need to pass it as a value for the <code>keyname</code> parameter.</p>

<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"my key@f9a1554e3f5e30c8"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>string</code></td>
<td>extended key name.</td>
</tr>
</tbody></table>
<h2 id='sign-transaction-in-hex-format'>Sign transaction in hex format</h2>
<aside class="notice">
You can sign transactions in hex or hash format. 
For example, for Ethereum transaction, you do not need to pass <code>chainid</code> as a parameter because it is incorporated in the hex. 
</aside>

<aside class="notice">
Please remember that you need to insert your own <code>key name</code> in the parameters when copying the requests!
</aside>
<h3 id='command-2'>Command</h3>
<p>sign_hex</p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sign_hex"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"params"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"chainid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"de5f4d8974715e20f47c8bb609547c9e66b0b9e31d521199b3d8d6af6da74cb1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"871689d060721b5cec5a010080841e00000000000011130065cd1d0000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"blockchain_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"keyname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my key@f9a1554e3f5e30c8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unlock_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w"> 
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters-2'>Query parameters</h3>
<table><thead>
<tr>
<th><strong>Parameter</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>chainid</td>
<td><code>string</code></td>
<td>Optional parameter for Array and Bitshares-like blockchains. Chainid is the hash of a genesis file used to identify the chain.</td>
</tr>
<tr>
<td>transaction</td>
<td><code>string</code></td>
<td>Hex representation of the transaction.</td>
</tr>
<tr>
<td>blockchain_type</td>
<td><code>string</code></td>
<td>Inserts the name of blockchain youâ€™re using. Possible options: Array, Bitcoin, Ethereum, Bitshares.</td>
</tr>
<tr>
<td>keyname</td>
<td><code>string</code></td>
<td>Inserts the mnemonic label of your key.</td>
</tr>
<tr>
<td>unlock_time</td>
<td><code>integer</code></td>
<td>This parameter is experimental and optional! If this parameter is defined and if it is greater than zero, it unlocks the key for a set number of seconds. While the key is unlocked, the transactions will be signed without the user&#39;s approval.</td>
</tr>
</tbody></table>
<h3 id='response-format-2'>Response format</h3>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"6cc47faa3778d15efeb470cd4154fdceb80633beaed15f0816d93951ffd7629a5fae3fe83c030f5f8a0cea82c1907f85418b93e820ea3b043c116053afae20a300"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>hex string</code></td>
<td>65-byte signature in hex-string format.</td>
</tr>
</tbody></table>
<h2 id='sign-hash-of-transaction'>Sign hash of transaction</h2>
<p>This request is suited best for advanced users who are eager to work on a low level. You should have knowledge of how to calculate hash of transaction, given the type of blockchain, and know the type of signature and its packaging.</p>

<aside class="notice">
Please remember that you need to insert your own <code>key name</code> in the parameters when copying the requests!
</aside>
<h3 id='command-3'>Command</h3>
<p>sign_hash</p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sign_hash"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"params"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"sign_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VRS_canonical"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fe5e4a8974715e20f47c8bb609547c9e66b0b9e31d521199b3d8d6af6da74cb1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"keyname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my key@f9a1554e3f5e30c8"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters-3'>Query parameters</h3>
<table><thead>
<tr>
<th><strong>Parameter</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>sign-type</td>
<td><code>string</code></td>
<td>Customizes the way secp256 library is used by choosing one of its arguments through sign-type parameter. It has two possible value options: RSV_noncanonical and VRS_canonical. Default value is RSV_noncanonical. Prefix RSV/VRS means signature struct: [R, S, v] or [v, R, S].</td>
</tr>
<tr>
<td>hash</td>
<td><code>string</code></td>
<td>Hash calculated from the transaction. It can be the result of the first calculation or the second - depending on the type of the blockchain. For example, Bitcoin uses two calculations: to sign a bitcoin transaction you need to transmit the final (second) hash. Ethereum and Array make only one calculation to get the hash.</td>
</tr>
<tr>
<td>keyname</td>
<td><code>string</code></td>
<td>Inserts the mnemonic label of your key.</td>
</tr>
</tbody></table>
<h3 id='response-format-3'>Response format</h3>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"62826b9c7b6bbfcd89456c1e8068e141d6a46b2c1c0166ed25ba8ad6ede320f4454ff116d13f4e679e8224fcca49f49d50c279ed88513a1db7185946e26811ab01"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>hex string</code></td>
<td>65-byte signature in hex format.</td>
</tr>
</tbody></table>
<h2 id='list-all-key-names'>List all key names</h2>
<p>All full key names of the private keys that are kept on your computer.</p>
<h3 id='command-4'>Command</h3>
<p>list</p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"list"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters-4'>Query parameters</h3>
<p>No</p>
<h3 id='response-format-4'>Response format</h3>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"my key@47f926e22f376478"</span><span class="p">,</span><span class="s2">"my key@e67871253c263de0"</span><span class="p">,</span><span class="s2">"my key@e755d5b98b6ed747"</span><span class="p">,</span><span class="s2">"my key@f9a1554e3f5e30c8"</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>JSON array of strings</code></td>
<td>lists all your key names.</td>
</tr>
</tbody></table>
<h2 id='calculate-the-public-key'>Calculate the public key</h2>
<aside class="notice">
Please remember that you need to insert your own <code>key name</code> in the parameters when copying the requests!
</aside>
<h3 id='command-5'>Command</h3>
<p>public_key</p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> 
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public_key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> 
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"keyname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my key@f9a1554e3f5e30c8"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters-5'>Query parameters</h3>
<table><thead>
<tr>
<th><strong>Parameter</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>keyname</td>
<td><code>string</code></td>
<td>Inserts the name of the key from which you want to calculate a public key.</td>
</tr>
</tbody></table>
<h3 id='response-format-5'>Response format</h3>
<p>64-byte public key. The length of the public key depends on the type of the blockchain. For example, in Ethereum, the length of a public key is 64 bytes.</p>

<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"a7aea4bd112706655cb7014282d2a54658924e69c68f5a54f2cd5f35c6fcba9b610d6ae8549f960ae96e23ffc017f305c1d8664978c8ba8a1cc656fd9d068ef5"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>hex string</code></td>
<td>64-byte public key.</td>
</tr>
</tbody></table>
<h2 id='lock-all-unlocked-keys'>Lock all unlocked keys</h2>
<p>This command protects you from any hostile intervention into the KeyChain while you have left your computer without supervision.</p>
<h3 id='command-6'>Command</h3>
<p>lock</p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lock"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters-6'>Query parameters</h3>
<p>No</p>
<h3 id='response-format-6'>Response format</h3>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"true"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>bool</code></td>
<td>bool result.</td>
</tr>
</tbody></table>
<h2 id='unlock-private-key'>Unlock private key</h2>
<p>Unlock your key when you are ready to use it. </p>

<aside class="notice">
This parameter is experimental! Allowing the user to sign transactions without extra authorization is not secure and can be harmful. If <code>unlock_time</code> is greater than zero, you will see an insecure action warning. We do not recommend to use it. Although it might be needed if you want to speed up signing transactions.
</aside>

<aside class="notice">
<code>Sign_hex</code> and <code>sign_hash</code> commands assume implicit unlocking of your keys. 
</aside>

<aside class="notice">
Please remember that you need to insert your own <code>key name</code> in the parameters when copying the requests!
</aside>
<h3 id='command-7'>Command</h3>
<p>unlock </p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unlock"</span><span class="w">
  </span><span class="s2">"params"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"keyname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my key@be5f6e75878b84ba"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unlock_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters-7'>Query parameters</h3>
<table><thead>
<tr>
<th><strong>Parameter</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>keyname</td>
<td><code>string</code></td>
<td>Inserts the name of the key you want to unlock.</td>
</tr>
<tr>
<td>unlock_time</td>
<td><code>integer</code></td>
<td>When this parameter is specified, it unlocks the key for a set number of seconds. While the key is unlocked, the pass entry window will not appear and the transactions will be signed without the user&#39;s approval.</td>
</tr>
</tbody></table>
<h3 id='response-format-7'>Response format</h3>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"true"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>bool</code></td>
<td>bool result.</td>
</tr>
</tbody></table>
<h2 id='keychain-version-details'>KeyChain version details</h2>
<p>You can request the details of the current KeyChain version you are using.</p>
<h3 id='command-8'>Command</h3>
<p>about</p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="s2">"about"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters-8'>Query parameters</h3>
<p>No</p>
<h3 id='response-format-8'>Response format</h3>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="s2">"0.9.114"</span><span class="p">,</span><span class="s2">"git_revision_sha"</span><span class="p">:</span><span class="s2">"59861769dca634d08d5442cb0074d40d8f544e66"</span><span class="p">,</span><span class="s2">"git_revision_age"</span><span class="p">:</span><span class="s2">"9 minutes ago"</span><span class="p">,</span><span class="s2">"compile_date"</span><span class="p">:</span><span class="s2">"compiled on Dec 12 2018 at 08:11:44"</span><span class="p">,</span><span class="s2">"boost_version"</span><span class="p">:</span><span class="s2">"1.66"</span><span class="p">,</span><span class="s2">"openssl_version"</span><span class="p">:</span><span class="s2">"OpenSSL 1.1.1  11 Sep 2018"</span><span class="p">,</span><span class="s2">"build"</span><span class="p">:</span><span class="s2">"linux 64-bit"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>json object</code></td>
<td>version details as a json object with the following parameters.</td>
</tr>
<tr>
<td>version</td>
<td><code>string</code></td>
<td>number of the current version.</td>
</tr>
<tr>
<td>git_revision_sha</td>
<td><code>string</code></td>
<td>hash of the commit.</td>
</tr>
<tr>
<td>git_revision_age</td>
<td><code>string</code></td>
<td>age of the commit.</td>
</tr>
<tr>
<td>compile_date</td>
<td><code>string</code></td>
<td>time of compilation.</td>
</tr>
<tr>
<td>boost_version</td>
<td><code>string</code></td>
<td>required version of the boost library.</td>
</tr>
<tr>
<td>openssl_version</td>
<td><code>string</code></td>
<td>required openssl version.</td>
</tr>
<tr>
<td>build</td>
<td><code>string</code></td>
<td>required operating system.</td>
</tr>
</tbody></table>
<h2 id='keychain-version-number'>KeyChain version number</h2>
<p>You can request the number of the current version you are using.</p>
<h3 id='command-9'>Command</h3>
<p>version</p>

<blockquote>
<p>JSON Request</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="s2">"version"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='query-parameters-9'>Query parameters</h3>
<p>No</p>
<h3 id='response-format-9'>Response format</h3>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"0.9.114"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>string</code></td>
<td>current version number which has the form of &quot;[major].[minor].[build number]&quot;.</td>
</tr>
</tbody></table>
<h1 id='installation-guides'>Installation guides</h1><h2 id='macos'>macOS</h2><h3 id='system-requirements'>System requirements</h3>
<ul>
<li>macOS <a href="#http://support.apple.com/downloads/DL1917/en_US/macosupd10.12.5.dmg">10.12</a> or <a href="https://support.apple.com/downloads/macos">newer</a>.</li>
</ul>
<h3 id='how-to-install'>How to install</h3>
<p>Download <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.11/KeyChain.Installer.v0.11.zip">KeyChain</a> and follow the steps of the graphic installer. </p>

<p><link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"></p>

<p>1 Click &quot;next&quot; to start installation <button class="show btn btn-info btn-sm" data-image='1'>show</button></p>

<p><img id='1' width="562" alt="2018-12-13 19 42 06" src="https://user-images.githubusercontent.com/34011337/50005299-fbe6b180-ffba-11e8-97a9-0d8fc5145db8.png"></p>

<p>2 Accept the terms of the License Agreement <button class="show btn btn-info btn-sm" data-image='2'>show</button></p>

<p><img id='2' width="562" alt="2018-12-13 19 42 08" src="https://user-images.githubusercontent.com/34011337/50005305-fee1a200-ffba-11e8-9373-409a58a8f8a6.png"></p>

<p>3 Choose a folder and click &quot;next&quot; <button class="show btn btn-info btn-sm" data-image='3'>show</button></p>

<p><img id='3' width="562" alt="2018-12-13 19 42 10" src="https://user-images.githubusercontent.com/34011337/50005310-030dbf80-ffbb-11e8-967c-d5eadf1cfec0.png"></p>

<p>4 Click &quot;install&quot; for installation to start <button class="show btn btn-info btn-sm" data-image='4'>show</button></p>

<p><img id='4' width="562" alt="2018-12-13 19 42 13" src="https://user-images.githubusercontent.com/34011337/50005315-0608b000-ffbb-11e8-8dea-0fd9375b4aa7.png"></p>

<p>5 You will need to authorize the installation <button class="show btn btn-info btn-sm" data-image='5'>show</button></p>

<p><img id='5' width="555" alt="mac-4" src="https://user-images.githubusercontent.com/34011337/49649378-0db7da00-fa3a-11e8-95b3-3ae9f8152204.png"></p>

<p>6 Wait until the setup is complete <button class="show btn btn-info btn-sm" data-image='6'>show</button></p>

<p><img id='6' width="518" alt="2018-12-13 19 42 24" src="https://user-images.githubusercontent.com/34011337/50005317-086b0a00-ffbb-11e8-8d81-7ecebd54dabb.png"></p>

<p>7 Congratulations! You have installed KeyChain <button class="show btn btn-info btn-sm" data-image='7'>show</button></p>

<p><img id='7' width="532" alt="mac-6" src="https://user-images.githubusercontent.com/34011337/49649380-0e507080-fa3a-11e8-8645-b86dbd139dbc.png"></p>
<h3 id='check-if-keychain-is-installed'>Check if KeyChain is installed</h3>
<p>After installation, connect to the demo-page: <a href="http://localhost:16384/">http://localhost:16384/</a> to check if the installation was successful and to test the KeyChain commands. In case everything went well, you will see the following page and you will be able to see responses to the commands in the &quot;Response&quot; box when you click on them.</p>

<p><button class="show btn btn-info btn-sm" data-image='8'>show</button></p>

<p><img id='8' alt="screenshot from 2018-12-10 15-57-27" src="https://user-images.githubusercontent.com/34011337/49734247-be211a80-fc94-11e8-8d85-c70b738ecae3.png"></p>
<h2 id='windows'>Windows</h2>
<p><a href="https://github.com/arrayio/array-io-keychain/releases/download/0.13/keychain.msi">Download</a> Windows installer.</p>
<h3 id='system-requirements-2'>System requirements</h3>
<ul>
<li>Windows 7 or newer.</li>
</ul>
<h3 id='how-to-install-2'>How to install</h3>
<p>Download KeyChain and follow the steps of the graphic installer. </p>

<p>1 Click &quot;next&quot; to prepare installation  <button class="show btn btn-info btn-sm" data-image='10'>show</button></p>

<p><img id='10' width="532" alt="wind1" src="https://user-images.githubusercontent.com/34011337/50442889-08033500-0912-11e9-99d7-665d9e5446d4.png"></p>

<p>2 Accept the terms of the License and click &quot;next&quot;  <button class="show btn btn-info btn-sm" data-image='11'>show</button></p>

<p><img id='11' width="532" alt="license" src="https://user-images.githubusercontent.com/34011337/50442857-e0ac6800-0911-11e9-95d3-b95afa2fd34e.png"></p>

<p>3 Choose a folder, click &quot;next&quot;  <button class="show btn btn-info btn-sm" data-image='12'>show</button></p>

<p><img id='12' width="532" alt="choose folder" src="https://user-images.githubusercontent.com/34011337/50442901-14878d80-0912-11e9-9910-5a6d42310638.png"></p>

<p>4 Click &quot;install&quot; for installation to start  <button class="show btn btn-info btn-sm" data-image='13'>show</button></p>

<p><img id='13' width="532" alt="click install to start" src="https://user-images.githubusercontent.com/34011337/50442911-21a47c80-0912-11e9-959d-123f4951c602.png"></p>

<p>5 Wait until the setup is complete  <button class="show btn btn-info btn-sm" data-image='14'>show</button></p>

<p><img id='14' width="532" alt="wait" src="https://user-images.githubusercontent.com/34011337/50442920-2cf7a800-0912-11e9-81f3-a1f09a549761.png"></p>

<p>6 Congratulaions! You have installed KeyChain  <button class="show btn btn-info btn-sm" data-image='15'>show</button></p>

<p><img id='15' width="532" alt="wind6" src="https://user-images.githubusercontent.com/34011337/50442929-3254f280-0912-11e9-9239-b5425d780de4.png"></p>
<h3 id='check-if-keychain-is-installed-2'>Check if KeyChain is installed</h3>
<p>After installation, connect to the demo-page: <a href="http://localhost:16384/">http://localhost:16384/</a> to check if the installation was successful and to test the KeyChain commands. In case everything went well, you will see the following page and you will be able to see responses to the commands in the &quot;Response&quot; box when you click on them.</p>

<p><button class="show btn btn-info btn-sm" data-image='16'>show</button></p>

<p><img id='16' alt="screenshot from 2018-12-10 15-57-27" src="https://user-images.githubusercontent.com/34011337/49734247-be211a80-fc94-11e8-8d85-c70b738ecae3.png"></p>

<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<script>
  var button = $(".show");
  var image = $("img");
  image.hide();
  button.on("click", function(){
    var id = $(this).data('image')
    $("#"+id).toggle();
  })
</script>
<h2 id='linux'>Linux</h2>
<p>Linux installer will be accessible soon.</p>

<p>We are passionate about KeyChain and seek to make it as soon as possible, so that you could enjoy its wonderful features on any operating system you like.</p>
<h3 id='system-requirements-3'>System requirements</h3>
<ul>
<li><p>Ubuntu 16.04 or newer</p></li>
<li><p>Debian 9 or newer</p></li>
<li><p>Linux Mint 18.3 or newer</p></li>
</ul>
<h3 id='how-to-install-3'>How to install</h3>
<p>Coming soon</p>
<h1 id='sign-an-ethereum-transaction'>Sign an Ethereum transaction</h1>
<p>Here you can find an instruction on how to sign an Ethereum transaction with KeyChain.</p>

<p>On this <a href="https://arrayio.github.io/array-io-keychain/eth_signer/">demo page</a> you can try out signing Ethereum transactions with KeyChain.</p>
<h2 id='step-by-step-guide'>Step-by-step guide</h2><h3 id='1-install-keychain-for-macos'>1. Install KeyChain for macOS</h3>
<p><a href="https://github.com/arrayio/array-io-keychain/releases/download/0.11/KeyChain.Installer.v0.11.zip">Download KeyChain installer</a>.</p>
<h3 id='2-generate-the-key'>2. Generate the key</h3>
<p>Start with the command <code>wscat -c ws://localhost:16384/</code>
and send the <code>create</code> command to generate the key.</p>

<blockquote>
<p>Create a key pair</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"params"</span><span class="p">:</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"keyname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my key"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"curve"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secp256k1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cipher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aes256"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<p>You will get an <strong>extended name</strong> of the key which consists of the name you have given it as a prefix and the first 8 bytes of the hash. Note that from now on you should insert the extended key! </p>

<aside class="notice">
Insert your own extended name of the key! Do not copy the following code together with the key name that we use because it is specified here only as an example of how your key name might look like. 
</aside>
 

<blockquote>
<p>Then request a public key via</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> 
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public_key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"params"</span><span class="p">:</span><span class="w"> 
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"keyname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my key@f9a1554e3f5e30c8"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='3-get-the-address'>3. Get the address</h3>
<p>The address can be calculated from the public key.</p>

<blockquote>
<p>Get address from public key</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//go</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">javascript</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">ethUtil</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'ethereumjs-util'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">publicKey</span> <span class="o">=</span> <span class="s1">'YOUR_PUBLIC_KEY'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">fromAdd</span> <span class="o">=</span> <span class="nx">ethUtil</span><span class="p">.</span><span class="nx">publicToAddress</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
</code></pre><h3 id='4-make-a-transaction'>4. Make a transaction</h3>
<p>Now you can transfer some money to the address corresponding to the public key.</p>

<p>In case you work with ropsten - 
https://faucet.ropsten.be/</p>
<h3 id='5-check-the-balance'>5. Check the balance</h3>
<p>Check the balance of the address - it should have enough ether for a successful transfer.</p>

<blockquote>
<p>Check balance</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//go</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">javascript</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">getBalance</span><span class="p">(</span><span class="nx">fromAdd</span><span class="p">)</span> 
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">);</span>
</code></pre><h3 id='6-sign-transaction'>6. Sign transaction</h3>
<p>You can now use the key that you have generated to sign a transaction.</p>

<p>You can find an example of the code <a href="https://gist.github.com/cypherpunk99/3e1314f8cc62cd675fa5c8f7bbe97923">here</a>.</p>
<h3 id='7-check-etherscan'>7. Check Etherscan</h3>
<p><a href="https://ropsten.etherscan.io/address/0x1ba05dad1abe91fdea3afffe9676b59076ce0ece">Etherscan</a></p>

<p><img src="https://user-images.githubusercontent.com/34011337/49658738-d35b3680-fa53-11e8-9d49-7739492ecab7.png" alt="screen shot 2018-11-30 at 19 19 52" /></p>
<h1 id='websocket-api'>WebSocket API</h1>
<p><strong>KeyChain</strong> contains a WebSocket API. This API can be used to stream information from a KeyChain instance to any client that implements WebSockets. Implementations in different languages:</p>

<ul>
<li>NodeJS</li>
<li>Python</li>
<li>JavaScript/HTML</li>
<li>etc</li>
</ul>

<p>Install KeyChain for <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.11/KeyChain.Installer.v0.11.zip">macOS</a>, <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.13/keychain.msi">Windows</a>, <a href="#linux">Linux</a> and connect to the demo page via <a href="http://localhost:16384/">http://localhost:16384/</a>.</p>
<h2 id='demo-pages-in-javascript'>Demo pages in JavaScript</h2><h3 id='for-testing-the-keychain-commands'>For testing the KeyChain commands</h3>
<ul>
<li><p>On this <a href="https://arrayio.github.io/array-io-keychain/demo/">demo page</a> you can test all the KeyChain commands.</p></li>
<li><p><a href="https://github.com/arrayio/array-io-keychain/tree/master/docs/demo">Here</a> you will find the <strong>code</strong> of the KeyChain demo page. It will be automatically installed together with the KeyChain.</p></li>
</ul>
<h3 id='for-signing-transactions'>For signing transactions</h3>
<ul>
<li><p><a href="https://arrayio.github.io/array-io-keychain/eth_signer/">Here</a> you can try out signing Ethereum transactions with KeyChain.</p></li>
<li><p>You can find an example of the code <a href="https://gist.github.com/cypherpunk99/3e1314f8cc62cd675fa5c8f7bbe97923">here</a>.</p></li>
</ul>
<h2 id='message-format'>Message format</h2>
<blockquote>
<p>For example, here is a request for generating keys: </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"create"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"params"</span><span class="p">:</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"keyname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my key"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"curve"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secp256k1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cipher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aes256"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<p>Each WebSocket API message is a json serialized object containing a command with the corresponding parameters.</p>

<p>For full comprehensive descriptions of the commands, acceptable parameters and values, go to the <a href="#generate-a-key-pair">Protocol</a>. </p>
<h2 id='websocket-integration-guide'>WebSocket integration guide</h2><h3 id='nodejs-integration-example'>NodeJS integration example</h3>
<p>The following will show the usage of websocket connections. </p>

<blockquote>
<p>We make use of the <code>wscat</code> application available via npm:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//go</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">javascript</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="o">-</span><span class="nx">g</span> <span class="nx">wscat</span>
</code></pre>
<blockquote>
<p>A simple call would take the form:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//go</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">javascript</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">$</span> <span class="nx">wscat</span> <span class="o">-</span><span class="nx">c</span> <span class="nx">ws</span><span class="p">:</span><span class="c1">//127.0.0.1:16384</span>
<span class="o">&gt;</span> <span class="p">{</span> <span class="s2">"command"</span><span class="p">:</span> <span class="s2">"list"</span><span class="p">}</span>
</code></pre><h4 id='successful-calls'>Successful Calls</h4>
<p>The API will return a properly JSON formated response carrying the same id as the request to distinguish subsequent calls.</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"result"</span><span class="p">:</span><span class="w">  </span><span class="err">..data..</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h4 id='error'>Error</h4>
<p>In case of an error, the resulting answer will carry an error attribute and a description in human-readable format:</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"error"</span><span class="p">:</span><span class="s2">"Error: keyfile could not be found by keyname"</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h3 id='javascript-integration-example'>JavaScript integration example</h3>
<p>Before you proceed with the integration, you need to install KeyChain for <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.11/KeyChain.Installer.v0.11.zip">macOS</a>, <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.13/keychain.msi">Windows</a>, <a href="#linux">Linux</a>.</p>
<h4 id='test-in-the-web'>Test in the web</h4>
<p>After installing KeyChain, open the browser and connect to the demo page via <a href="http://localhost:16384/">http://localhost:16384/</a>. </p>

<p>When the connection is established, you will see the following KeyChain page. If you click on one of the commands on the left panel, you will see its json request and response in the white boxes below:</p>

<p><img src="https://user-images.githubusercontent.com/34011337/49734247-be211a80-fc94-11e8-8d85-c70b738ecae3.png" alt="screenshot from 2018-12-10 15-57-27" /></p>
<h4 id='test-from-a-terminal-application'>Test from a terminal application:</h4>
<p>You can see if the installation was successful by going to the terminal app, opening KeyChain and trying one of the commands that you can take from the <a href="#generate-a-key-pair">Protocol</a>:</p>

<p>c:\Users\User-1&gt;cd &quot;C: Program Files\WsKeychain&quot;
c:\Program Files\WSKeychain&gt;keychain 
{&quot;command&quot;:&quot;list&quot;}</p>

<p>A successful response will take the following format:</p>
<h4 id='response-format-10'>Response format</h4>
<blockquote>
<p>Response example</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"result"</span><span class="p">:</span><span class="s2">"my key@47f926e22f376478"</span><span class="p">,</span><span class="s2">"my key@e67871253c263de0"</span><span class="p">,</span><span class="s2">"my key@e755d5b98b6ed747"</span><span class="p">,</span><span class="s2">"my key@f9a1554e3f5e30c8"</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre>
<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
<th><strong>Value example</strong></th>
</tr>
</thead><tbody>
<tr>
<td>result</td>
<td><code>JSON array of strings</code></td>
<td>list of key names</td>
<td><code>&quot;my key@47f926e22f376478&quot;,&quot;my key@e67871253c263de0&quot;,&quot;my key@e755d5b98b6ed747&quot;,&quot;my key@f9a1554e3f5e30c8&quot;</code></td>
</tr>
</tbody></table>
<h3 id='build-a-page-that-connects-to-websocket'>Build a page that connects to WebSocket</h3>
<p><a href="https://github.com/arrayio/array-io-keychain/blob/master/docs/demo/index.html">Here</a> you will find an example of how to build a web-page that connects to WebSocket.</p>

<p>Save this to the folder  where you will be running the <code>websocket</code> command.</p>

<p>Open this page via localhost: <a href="http://localhost:16384/">http://localhost:16384/</a></p>

<p>You can find the code for the demo page and the page itself up in the <a href="#demo-pages-in-javascript">Demo pages in JavaScript</a> section.</p>
<h1 id='pipe-api'>Pipe API</h1>
<p><strong>KeyChain</strong> has an I/O stream (pipe) integration option. Interaction with <strong>KeyChain</strong> through pipes requires a terminal application as an input module that sends requests (STDIN) to the security layer that shows you the details of your request. When you approve the request through an interative gialogue window, the request goes back through the signing module and gives you an answer (STDOUT). </p>

<p>For detailed description of the process, see <a href="#three-security-layers-of-keychain">Three security layers</a> section.</p>
<h2 id='message-format-2'>Message format</h2>
<p>Each Pipe API message is a json serialized object containing a command with the corresponding parameters.</p>

<p>For full comprehensive descriptions of the commands, acceptable parameters and values, go to the <a href="#generate-a-key-pair">Protocol</a>.</p>
<h2 id='pipe-integration-guide'>Pipe integration guide</h2>
<p>Before you proceed with the integration, you need to install KeyChain for <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.11/KeyChain.Installer.v0.11.zip">macOS</a>, <a href="https://github.com/arrayio/array-io-keychain/releases/download/0.13/keychain.msi">Windows</a>, <a href="#linux">Linux</a>.</p>

<p>When the installation is complete, you can open stream input to start sending json requests through STDIN - STDOUT pipes.</p>

<blockquote>
<p>Here you will find an example of KeyChain integration using Node.js</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">//go</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">javascript</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="p">{</span> <span class="nx">spawn</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'child_process'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">keychain</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">'keychain'</span><span class="p">));</span>

<span class="nx">keychain</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`keychain data: </span><span class="p">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">toString</span><span class="p">()}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">keychain</span><span class="p">.</span><span class="nx">stderr</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`keychain stderr: </span><span class="p">${</span><span class="nx">data</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">keychain</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'close'</span><span class="p">,</span> <span class="p">(</span><span class="nx">code</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">code</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`keychain process exited with code </span><span class="p">${</span><span class="nx">code</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre><h3 id='see-all-your-keys'>See all your keys</h3><pre class="highlight json tab-json"><code><span class="err">//go</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">javascript</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">listCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="na">command</span><span class="p">:</span> <span class="s2">"list"</span> <span class="p">};</span>
<span class="nx">keychain</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">listCommand</span><span class="p">));</span>
</code></pre><h3 id='sign-transaction'>Sign transaction</h3>
<p>To sign a transaction, first you need to set the timeout value for your key. While it is unlocked, you can sign the transaction without entering a passphrase during this visit. Upon finishing the transaction, lock your keys.</p>
<pre class="highlight json tab-json"><code><span class="err">//go</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">javascript</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">unlockCommandTime</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"command"</span><span class="p">:</span> <span class="s2">"set_unlock_time"</span><span class="p">,</span> 
  <span class="s2">"params"</span><span class="p">:</span> 
  <span class="p">{</span>
    <span class="s2">"seconds"</span><span class="p">:</span> <span class="mi">10000</span>
  <span class="p">}</span>
<span class="p">};</span> 
<span class="nx">keychain</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">unlockCommandTime</span><span class="p">));</span>

<span class="kr">const</span> <span class="nx">unlockCommand</span> <span class="o">=</span> <span class="p">{</span>  
  <span class="s2">"command"</span><span class="p">:</span> <span class="s2">"unlock"</span><span class="p">,</span> 
  <span class="s2">"params"</span><span class="p">:</span> 
  <span class="p">{</span> 
    <span class="s2">"keyname"</span><span class="p">:</span> <span class="s2">"test1@d073edf782dec758"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">keychain</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">unlockCommand</span><span class="p">));</span>

<span class="kr">const</span> <span class="nx">signCommand</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"command"</span><span class="p">:</span> <span class="s2">"sign_hex"</span><span class="p">,</span>
  <span class="s2">"params"</span><span class="p">:</span>
  <span class="p">{</span>
    <span class="s2">"chainid"</span><span class="p">:</span> <span class="s2">"de5f4d8974715e20f47c8bb609547c9e66b0b9e31d521199b3d8d6af6da74cb1"</span><span class="p">,</span>
    <span class="s2">"transaction"</span><span class="p">:</span> <span class="s2">"871689d060721b5cec5a010080841e00000000000011130065cd1d0000000000000000"</span><span class="p">,</span>
    <span class="s2">"blockchain_type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
    <span class="s2">"keyname"</span><span class="p">:</span> <span class="s2">"test1@d073edf782dec758"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">keychain</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">signCommand</span><span class="p">));</span>

<span class="kr">const</span> <span class="nx">lockCommand</span> <span class="o">=</span> <span class="p">{</span>  
  <span class="s2">"command"</span><span class="p">:</span> <span class="s2">"lock"</span>
<span class="p">};</span>
<span class="nx">keychain</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">lockCommand</span><span class="p">));</span>

<span class="nx">keychain</span><span class="p">.</span><span class="nx">stdin</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">signCommand</span><span class="p">));</span>
</code></pre>
<p>For descriptions of all the commands and parameters, go to the <a href="#generate-a-key-pair">Protocol</a>.</p>
<h1 id='keychain-security'>KeyChain security</h1><h2 id='about-keychain-security'>About KeyChain security</h2>
<p>Choosing a means of storing keys is an important and responsible task that everybody needs to address when considering making <strong>transactions</strong> - irrespective of the type of  blockchain they use. That is why here we show you the <strong>detailed structure</strong> of our KeyChain - so that your choice of key storage is an informed decision based on real knowledge of what stands behind the system.</p>
<h2 id='how-keychain-ensures-safe-key-storage'>How KeyChain ensures safe key storage</h2>
<p>KeyChain encrypts private keys using AES256 algorithm and stores the keys in an isolated environment that is protected with <a href="#three-security-layers-of-keychain">three security layers</a>. </p>

<p><strong>AES256</strong> was first adopted by the U.S. government and now is used worldwide as a secure and reliable way of protecting information. It stands for <strong>Advanced Encryption Standard</strong> which handles <strong>256-bit keys</strong>. This is a symmetric encryption algorithm that creates an output (ciphertext) from the input (plaintext) in 14 rounds which involve several steps of encryption. These steps combine the procedures of other symmetric encryption algorithms: substitution cipher with a reference table, adding round key,  shifting rows, and mixing columns - all performed multiple times. </p>
<h2 id='os-specific-keychain-security'>OS-specific KeyChain security</h2><h3 id='unix-like-operating-systems'>Unix-like operating systems</h3>
<p>For Linux, we use a unique mechanism created by our team.</p>

<p>Typically, Linux offers the following algorithm of interacting with the user:</p>

<p><strong>1)</strong> Client app = &gt; connects =&gt; to X-server</p>

<p><strong>2)</strong> Client app =&gt; sends some X-proto specified commands =&gt; X-server receives the commands =&gt; X-server renders an interface window</p>

<p><strong>3)</strong> User enters a passphrase into the window =&gt; X-server catch the passphrase from the user =&gt; sends X-proto commands to the client =&gt; client app processes the passphrase from the user</p>

<p>However, around 1984, at the time when X11 was created, there existed no such task as performing secure operations via the Internet. The developers of X11 did not set out to protect the userâ€™s data from someone capturing it. Even now, there is still no real mechanism against this kind of attack.
To solve the problem of protecting the data, we have decided to look past the standard solutions. Instead of receiving a passphrase from a user through the X-server, we have chosen to receive the passphrase from the keyboard driver. This serves as a shortcut that allows KeyChain to work without connecting to the X-server, thus minimizing the risk of someone stealing the passphrase.</p>

<p>Therefore, now instead of the following sequenceâ€¦</p>

<ul>
<li>The user enters the passphrase into the window =&gt; X-server catches the passphrase =&gt; it sends the passphrase through X-proto =&gt; Client app processes the request</li>
</ul>

<p>â€¦ we have:</p>

<ul>
<li>The user enters the passphrase =&gt; KeyChain catches the keyboardâ€™s events directly</li>
</ul>

<p>The shorter the path, the fewer weak points can be found. We exclude the weakest link (X-server) from the process of entering the passphrase. Thus, for the third party to compromise the passphrase, they will need to intercept it right at the keyboard level, which requires to have root access and hence makes it almost impossible.</p>

<p>You might be asking yourself: if KeyChain functions without connecting to the X-server, why does the user see the dialogue window?</p>

<p>The answer is simple and is motivated by our concern with the user experience. Working through the command line is rather inconvenient for most people. That is why we use an emulator program that imitates the process of inputting the passphrase by receiving events from the KeyChain daemon. Note that no secret data goes into the emulator â€“ like a mirror that only reflects light without absorbing any of it. This allows KeyChain to minimize the risks to the minimum.</p>
<h3 id='windows-2'>Windows</h3>
<p>Users of <strong>Windows 10 Enterprise Edition</strong> can benefit from a new security feature - <strong>Isolated User Mode (IUM)</strong>. It employs a set of modes called <strong>Virtual Trusted Levels (VTL)</strong> to run processes separately, without accessing each otherâ€™s memory. 
We launch KeyChain on VTL1 (SecureMode). Any malware that is launched on VTL0 (NormalMode) does not have access to KeyChain. The mechanism of isolating the kernels is executed as a Windows OS process. Learn more about IUM processes <a href="https://docs.microsoft.com/en-us/windows/desktop/procthread/isolated-user-mode--ium--processes">here</a>.</p>

<p>To ensure secure passphrase entry, <strong>Windows Vista/7/8</strong> and <strong>Windows 10 (not Enterprise Edition)</strong> use a mechanism similar to the one used for <strong>User Access Control (UAC)</strong>. In particular, UAC is used at a program setup to avoid giving a malware access to the system context.</p>

<p>KeyChain gets access to the system environment when it is being installed. 
A malware can only access the user context (unless it is installed in the system as a service). The processes that are launched in the user context do not have access to the applications that are launched in the isolated context.Hence, a malware cannot get access to KeyChain data because of the mechanism of separating the access between the levels of the OS. For more information, please refer to <a href="https://docs.microsoft.com/en-us/windows/security/identity-protection/user-account-control/how-user-account-control-works">Microsoft documentation</a>.</p>
<h3 id='macos-2'>macOS</h3>
<p>macOS has in innate security mechanism that does not allow any other program to interfere with a process if it was not the one that started it. Therefore, all we needed to do was to take care of the intermediary step that takes place at the passphrase entry on the keyboard. That is why we incorporated the <code>EnableSecureEventInput</code> function that provides a means for a process to protect sensitive data from being intercepted by other processes. Learn more on the <a href="https://developer.apple.com/library/archive/technotes/tn2150/_index.html#//apple_ref/doc/uid/DTS10004249">Apple developers portal</a>.</p>
<h2 id='three-security-layers-of-keychain'>Three security layers of KeyChain</h2>
<p><img src="https://user-images.githubusercontent.com/34011337/49658582-719acc80-fa53-11e8-97bc-e957ef604075.png" alt="diagram keychain fin 1" /></p>

<p>Apps or websites send requests to the KeyChain through two types of communication - standard I/O streams (mostly called pipes), and the WebSocket. 
The architecture of the KeyChain software consists of the three independent layers:</p>

<ol>
<li><p><strong>API layer</strong> which integrates with your app, website or any external application. It is language-neutral. The protocol for the terminal application operates with the JSON format in synchronous request/response way. The main function of the <strong>API layer</strong> is to transmit and parse commands for given API. 
Each request carries information about commands, the type of key user wants to use to sign transactions and other relevant parameters which you can find in the <a href="#generate-a-key-pair">Protocol</a>. </p></li>
<li><p><strong>Security layer</strong> receives the commands from the API layer and acts as an OS-specific  protection mechanism for the <strong>interface window</strong> (third layer). It serves as a shield from potential attacks at sensitive data and information. <strong>Security layer</strong> is tailored for the Mac OS, Linux, and Windows OS and operates only with permitted files (through admin access). 
The request, transmitted to the <strong>Signing module</strong> which holds the private keys, works simultaneously with the Secured input module that uses OS-specific mechanism. The <strong>Secured input module</strong> protects the passphrase from key grabbers and malware.</p></li>
<li><p><strong>Representation layer</strong> is the <strong>UI window</strong> which notifies the user about the details of transactions and necessary actions. The <strong>interface window</strong> is initiated from <strong>Security layer</strong>. Once the user inputs the correct passphrase, it sends the permission to the <strong>Signing module</strong> to unlock the demanded key. Passphrase input field is protected by the secured input module. <strong>Security layer</strong> decrypts the given key with the correct passphrase entered by the user.  In this instance <strong>Signing module</strong> can operate with the open private key, for example it can extract information, sign transactions, therefore responding to given requests.</p></li>
</ol>
<h1 id='useful-links'>Useful links</h1>
<p>This page contains links to the scholarly and publicistic sources that we find useful concerning KeyChain.</p>

<ul>
<li><p>Building a Transaction By Hand: <a href="https://klmoney.wordpress.com/bitcoin-dissecting-transactions-part-2-building-a-transaction-by-hand/">guide</a></p></li>
<li><p>Cryptography Docs: <a href="https://www.adjoint.io/docs/cryptography.html">documentation of cryptographic algorithms used in banking</a></p></li>
<li><p>Default nonce function: <a href="https://www.reddit.com/r/Bitcoin/comments/1mwzo2/what_is_rfc6979/">blog thread on the topic &quot;What is RFC6979?&quot;</a></p></li>
<li><p>Guide to Elliptic Curve Digital Signatures: <a href="http://royalforkblog.github.io/2014/09/04/ecc/">guide with thorough explanations of technical aspects</a></p></li>
<li><p>Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ð¾ ÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð½Ð° ÑÐ»Ð»Ð¸Ð¿Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… ÐºÑ€Ð¸Ð²Ñ‹Ñ…: <a href="https://habr.com/post/335906/">about elliptic curves in Russian</a></p></li>
</ul>
<h1 id='errors'>Errors</h1>
<aside class="notice">
If you receive an error message, then the request could not be successfully processed. Here you can find out more about errors, so that you can prevent them next time. If you have trouble dealing with them, please refer to the log files, create an issue with a "bug" tag or contact us.
</aside>
<h2 id='error-handling'>Error Handling</h2>
<p>In case of an error, the resulting answer will carry an error attribute and the code of an error together with other parameters listed below. When you receive an error code, you can look the error up in the <a href="#exception-codes">table</a>.</p>

<p>All errors have the following format: </p>

<p>see the right panel</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="s2">"error"</span><span class="p">:</span><span class="w">
</span><span class="p">{</span><span class="w">
</span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="err">..error</span><span class="w"> </span><span class="err">code</span><span class="w"> </span><span class="err">number..</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="err">..error</span><span class="w"> </span><span class="err">name..</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="err">..description..</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="s2">"trace"</span><span class="p">:</span><span class="w"> 
</span><span class="p">[{</span><span class="s2">"level"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="s2">"file"</span><span class="p">:</span><span class="w"> </span><span class="err">..file</span><span class="w"> </span><span class="err">name..</span><span class="w"> </span><span class="p">,</span><span class="s2">"line"</span><span class="p">:</span><span class="w"> </span><span class="err">..line</span><span class="w"> </span><span class="err">number..</span><span class="w"> </span><span class="p">,</span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="err">..name</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">function</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">code</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">carries</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">error..</span><span class="w"> </span><span class="p">,</span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="err">..exact</span><span class="w"> </span><span class="err">time</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">error..</span><span class="w"> </span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="s2">"level"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="s2">"file"</span><span class="p">:</span><span class="err">..file</span><span class="w"> </span><span class="err">name..</span><span class="w"> </span><span class="p">,</span><span class="s2">"line"</span><span class="p">:</span><span class="w"> </span><span class="err">..line</span><span class="w"> </span><span class="err">number..</span><span class="w"> </span><span class="p">,</span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="err">..name</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">function</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">code</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">carries</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">error..</span><span class="w"> </span><span class="p">,</span><span class="s2">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="err">..exact</span><span class="w"> </span><span class="err">time</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">error..</span><span class="w"> </span><span class="p">}]</span><span class="w">
</span><span class="p">}}</span><span class="w">
</span></code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">//go to json</span>
</code></pre><h2 id='exception-codes'>Exception codes</h2><h3 id='keychain-exceptions'>KeyChain exceptions</h3>
<table><thead>
<tr>
<th><strong>Error code</strong></th>
<th><strong>Error name</strong></th>
<th><strong>Comment</strong></th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>json_parse_error_code</td>
<td>error in json format of rpc command</td>
</tr>
<tr>
<td>2</td>
<td>rpc_command_parse_code</td>
<td>error while parsing the structure of rpc command (invalid set of fields or invalid value type)</td>
</tr>
<tr>
<td>3</td>
<td>command_not_implemented_code</td>
<td>command is not implemented</td>
</tr>
<tr>
<td>4</td>
<td>command_depreciated_code</td>
<td>command is depreciated</td>
</tr>
<tr>
<td>5</td>
<td>invalid_arg_exception_code</td>
<td>invalid command arguments: occurs in case a parameter&#39;s type or value was passed incorrectly</td>
</tr>
<tr>
<td>6</td>
<td>privkey_not_found_code</td>
<td>private key could not be found by this keyname</td>
</tr>
<tr>
<td>7</td>
<td>privkey_invalid_unlock_code</td>
<td>cannot unlock private key: occurs when the user provided a wrong password from a private key</td>
</tr>
<tr>
<td>8</td>
<td>password_input_error_code</td>
<td>error while getting password: all the other errors that occur while receiving a password from a user</td>
</tr>
<tr>
<td>9</td>
<td>internal_error_code</td>
<td>some unspecified internal error: might occur if there are errors in the program. If you get this error, it is advisable to contact support.</td>
</tr>
</tbody></table>
<h3 id='internal-errors'>Internal errors</h3>
<table><thead>
<tr>
<th><strong>Error code</strong></th>
<th><strong>Error name</strong></th>
</tr>
</thead><tbody>
<tr>
<td>10</td>
<td>parse_error_exception_code</td>
</tr>
<tr>
<td>11</td>
<td>timeout_exception_code</td>
</tr>
<tr>
<td>12</td>
<td>file_not_found_exception_code</td>
</tr>
<tr>
<td>13</td>
<td>key_not_found_exception_code</td>
</tr>
<tr>
<td>14</td>
<td>bad_cast_exception_code</td>
</tr>
<tr>
<td>15</td>
<td>assert_exception_code</td>
</tr>
<tr>
<td>16</td>
<td>encryption_error_code</td>
</tr>
<tr>
<td>17</td>
<td>null_optional_code</td>
</tr>
<tr>
<td>18</td>
<td>overflow_code</td>
</tr>
<tr>
<td>19</td>
<td>underflow_code</td>
</tr>
<tr>
<td>20</td>
<td>divide_by_zero_code</td>
</tr>
<tr>
<td>21</td>
<td>out_of_range_exception_code</td>
</tr>
<tr>
<td>22</td>
<td>eof_exception_code</td>
</tr>
</tbody></table>
<h3 id='third-party-exceptions'>Third party exceptions</h3>
<table><thead>
<tr>
<th><strong>Error code</strong></th>
<th><strong>Error name</strong></th>
<th><strong>Comments</strong></th>
</tr>
</thead><tbody>
<tr>
<td>23</td>
<td>std_exception_code</td>
<td>for std::exceptions (3rd party): standard exceptions that occurred in the third party components</td>
</tr>
<tr>
<td>24</td>
<td>unhandled_exception_code</td>
<td>for unhandled 3rd party exceptions: all the other exceptions that occurred in the third patry components</td>
</tr>
</tbody></table>
<h2 id='error-example'>Error example</h2><h3 id='parsing-error-the-command-was-incorrect'>Parsing error - the command was incorrect.</h3>
<p>Error format</p>

<table><thead>
<tr>
<th><strong>Field name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td><code>json object</code></td>
<td>error specifics</td>
</tr>
<tr>
<td>code</td>
<td><code>integer</code></td>
<td>error code number</td>
</tr>
<tr>
<td>name</td>
<td><code>string</code></td>
<td>error name</td>
</tr>
<tr>
<td>message</td>
<td><code>string</code></td>
<td>description of the error starting at the lower level where it occured and showing the higher level</td>
</tr>
<tr>
<td>trace</td>
<td><code>list of arrays</code></td>
<td>trace of the error, starting from the lower level and moving to the higher levels</td>
</tr>
</tbody></table>

<p>JSON example</p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="s2">"error"</span><span class="p">:</span><span class="w">
</span><span class="p">{</span><span class="w">
</span><span class="s2">"code"</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="w">
</span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"parse_error_exception_code"</span><span class="p">,</span><span class="w">
</span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"Parse Error: invalid index '123' in enum 'keychain_app::command_te' =&gt; cannot parse command"</span><span class="p">,</span><span class="w">
</span><span class="s2">"trace"</span><span class="p">:</span><span class="w">
</span><span class="p">[{</span><span class="s2">"level"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="s2">"file"</span><span class="p">:</span><span class="s2">"exception.cpp"</span><span class="p">,</span><span class="s2">"line"</span><span class="p">:</span><span class="mi">230</span><span class="p">,</span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"fc_light::throw_bad_enum_cast"</span><span class="p">,</span><span class="s2">"timestamp"</span><span class="p">:</span><span class="s2">"2018-12-25T16:38:41"</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="s2">"level"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="s2">"file"</span><span class="p">:</span><span class="s2">"keychain.cpp"</span><span class="p">,</span><span class="s2">"line"</span><span class="p">:</span><span class="mi">90</span><span class="p">,</span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"keychain_app::keychain::operator ()"</span><span class="p">,</span><span class="s2">"timestamp"</span><span class="p">:</span><span class="s2">"2018-12-25T16:38:41"</span><span class="p">}]</span><span class="w">
</span><span class="p">}}</span><span class="w">
</span></code></pre><pre class="highlight plaintext"><code>//go to json
</code></pre><h2 id='log-files'>Log files</h2>
<p>If you are experiencing any trouble working with KeyChain, here you can find locations of the log files:</p>

<p><strong>For macOS and Linux:</strong></p>

<p>/var/keychain/logs</p>

<p><strong>For Windows:</strong></p>

<p>Win10: %USERPROFILE%\AppData\Local\Keychain\Logs </p>

<p>where <strong>%USERPROFILE%</strong> is a user&#39;s folder, e.g. <strong>C:\Users\Alice</strong></p>

<p>Win7: %SystemRoot%\Logs\Keychain\Logs </p>

<p>where <strong>%SystemRoot%</strong> â€” the folder where the system is installed; usually it is <strong>C:\Windows</strong></p>
<h2 id='developer-debug-information'>Developer Debug Information</h2>
<p>If you need help fixing the bugs, please do not hesitate to contact us:</p>

<ul>
<li><a href="https://t.me/arrayio">Telegram</a></li>
<li><a href="https://stackoverflow.com/users/10429540/array-io">Stackoverflow</a></li>
<li><p><a href="https://twitter.com/ProjectArray">Twitter</a></p></li>
<li><p>Or you can write us an email to support@array.io. </p></li>
</ul>

<p>If you want to report a security issue, include the word &quot;security&quot; in the subject line.</p>

<p>We take security issues very seriously and we&#39;ll be looking forward to hearing from you. Still, we hope you enjoy using KeyChain and the integration goes smooth! </p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
